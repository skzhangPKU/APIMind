## APIMind
---
APIMind is a novel automated tool to assess description-to-permission fidelity in Android apps. The tool consists of two modules: Trigger and Fidelity Analyzer. Trigger utilizes a reinforcement learning model to explore app activities and monitor access to sensitive APIs that require sensitive permissions. Fidelity Analyzer uses an extended tool to check whether an activity collects more sensitive permissions than the users expect.

#### Framework:
<div align="center">
 <img src="https://github.com/skzhangPKU/APIMind/blob/master/APIMind_architecture.png" width="800">
</div>

## Getting Started
---
These instructions will get you a copy of the project up and running on your local machine for development and testing purposes.

## Prerequisites
---
* A rooted Google Pixel 5 device
* Frida version corresponding to your device if not a Google Pixel 5 device
* Python >= 3.7.3
* Required Python packages (see requirements.txt)

## Installation
---
1. Clone the APIMind GitHub repository to your local machine.
   ```sh
   git clone https://github.com/skzhangPKU/APIMind.git
   ```
2. Install required dependencies by running the following command:
   ```sh
   pip install -r requirements.txt
   ```
3. Download the pre-trained weight models, Frida, and Standford NLP Parser from [Google Drive](https://drive.google.com/drive/folders/1FrDyUGGBHNazm8rrT5ZFW3nj_iLYQNDA?usp=sharing) and place them in the corresponding directories in the project. **Please note that if you are using an emulator or another rooted device, instead of a Google Pixel 5 device, it is necessary to download the appropriate version of Frida**. Otherwise, the project will not launch successfully.

## Usage
1. Connect your rooted Google Pixel 5 mobile device to your local machine and enable USB debugging.
2. Run the Trigger module to monitor and record app activity and sensitive API access.
   ```sh
   cd Trigger
   python trigger.py
   ```
3. Use the recorded data as input for the Fidelity Analyzer module to evaluate whether app activity collects more sensitive permissions than the users expect. **Please note that Fidelity Analyzer has slight variations in each run.** The log of Fidelity Analyzerâ€™s results in our paper is shown in `gb2.log`. 
   ```sh
   cd FidelityAnalyzer
   python fidelity_analyzer.py
   ```
4. Analyze the output report generated by the Fidelity Analyzer module to assess description-to-permission fidelity.

#### Example:
Explorer will output the contents like the Figure below when it runs successfully.

<div align="center">
<img src="https://github.com/skzhangPKU/APIMind/blob/master/success_example.png" width="600">
</div>

The output of Fidelity Analyzer is shown in the figure below.

<div align="center">
<img src="https://github.com/skzhangPKU/APIMind/blob/master/fidelity_example.png" width="600">
</div>

## License
This project is licensed under the MIT License.

## Acknowledgements
We would like to thank the anonymous reviewers for their valuable feedback and suggestions.

## Contact
If you have any questions or suggestions, please feel free to contact us.
